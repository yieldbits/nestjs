"use strict";(self.webpackChunk_yieldbits_nestjs_website=self.webpackChunk_yieldbits_nestjs_website||[]).push([[234],{5318:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var o=n(7378);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,b=d["".concat(s,".").concat(m)]||d[m]||c[m]||a;return n?o.createElement(b,i(i({ref:t},u),{},{components:n})):o.createElement(b,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8881:function(e,t,n){n.r(t),n.d(t,{assets:function(){return g},contentTitle:function(){return h},default:function(){return w},frontMatter:function(){return v},metadata:function(){return f},toc:function(){return k}});var o=n(5773),r=n(808),a=n(7378),i=n(5318),l=n(6457),s=n(1309),p=n(8944),u="tabItem_WhCL";function c(e){var t,n,r,i=e.lazy,l=e.block,c=e.defaultValue,d=e.values,m=e.groupId,b=e.className,v=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),h=null!=d?d:v.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),f=(0,s.lx)(h,(function(e,t){return e.value===t.value}));if(f.length>0)throw new Error('Docusaurus error: Duplicate values "'+f.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var g=null===c?c:null!=(t=null!=c?c:null==(n=v.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(r=v[0])?void 0:r.props.value;if(null!==g&&!h.some((function(e){return e.value===g})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+g+'" but none of its children has the corresponding value. Available values are: '+h.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var k=(0,s.UB)(),y=k.tabGroupChoices,w=k.setTabGroupChoices,N=(0,a.useState)(g),C=N[0],E=N[1],x=[],_=(0,s.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var O=y[m];null!=O&&O!==C&&h.some((function(e){return e.value===O}))&&E(O)}var P=function(e){var t=e.currentTarget,n=x.indexOf(t),o=h[n].value;o!==C&&(_(t),E(o),null!=m&&w(m,o))},T=function(e){var t,n=null;switch(e.key){case"ArrowRight":var o=x.indexOf(e.currentTarget)+1;n=x[o]||x[0];break;case"ArrowLeft":var r=x.indexOf(e.currentTarget)-1;n=x[r]||x[x.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,p.Z)("tabs",{"tabs--block":l},b)},h.map((function(e){var t=e.value,n=e.label,r=e.attributes;return a.createElement("li",(0,o.Z)({role:"tab",tabIndex:C===t?0:-1,"aria-selected":C===t,key:t,ref:function(e){return x.push(e)},onKeyDown:T,onFocus:P,onClick:P},r,{className:(0,p.Z)("tabs__item",u,null==r?void 0:r.className,{"tabs__item--active":C===t})}),null!=n?n:t)}))),i?(0,a.cloneElement)(v.filter((function(e){return e.props.value===C}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},v.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==C})}))))}function d(e){var t=(0,l.Z)();return a.createElement(c,(0,o.Z)({key:String(t)},e))}function m(e){var t=e.children,n=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:o},t)}var b=["components"],v={sidebar_position:1,sidebar_label:"Integrate Probot with NestJS"},h="Integrate Probot with NestJS",f={unversionedId:"documentation/probot",id:"documentation/probot",title:"Integrate Probot with NestJS",description:"This section is still under construction.",source:"@site/docs/documentation/probot.mdx",sourceDirName:"documentation",slug:"/documentation/probot",permalink:"/nestjs/docs/documentation/probot",editUrl:"https://github.com/yieldbits/nestjs/tree/main/website/docs/documentation/probot.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Integrate Probot with NestJS"},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/nestjs/docs/intro"}},g={},k=[{value:"@yieldbits/probot",id:"yieldbitsprobot",level:2},{value:"Description",id:"description",level:2},{value:"Motivation",id:"motivation",level:2},{value:"Usage",id:"usage",level:2},{value:"Install",id:"install",level:3},{value:"Import",id:"import",level:3},{value:"Using synchronous configuration",id:"using-synchronous-configuration",level:4},{value:"Example",id:"example",level:3},{value:"Contribute",id:"contribute",level:2}],y={toc:k};function w(e){var t=e.components,n=(0,r.Z)(e,b);return(0,i.kt)("wrapper",(0,o.Z)({},y,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"integrate-probot-with-nestjs"},"Integrate Probot with NestJS"),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This section is still under construction.\nWe will be adding more description of the probot workflow slowly to this page.\nIn the meantime, this should help you get started."),(0,i.kt)("p",{parentName:"div"},"You can also help us by contributing ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/yieldbits/nestjs"},(0,i.kt)("strong",{parentName:"a"},"here")),"."))),(0,i.kt)("h2",{id:"yieldbitsprobot"},"@yieldbits/probot"),(0,i.kt)("p",{align:"center"},(0,i.kt)("a",{href:"https://www.npmjs.com/package/@yieldbits/probot"},(0,i.kt)("img",{src:"https://img.shields.io/npm/v/@yieldbits/probot.svg?style=flat",alt:"version"})),(0,i.kt)("a",{href:"https://www.npmjs.com/package/@yieldbits/probot"},(0,i.kt)("img",{alt:"downloads",src:"https://img.shields.io/npm/dt/@yieldbits/probot.svg?style=flat"})),(0,i.kt)("img",{alt:"license",src:"https://img.shields.io/npm/l/@yieldbits/probot.svg"})),(0,i.kt)("h2",{id:"description"},"Description"),(0,i.kt)("p",null,"This module provides access to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Probot")," library which is used for building GitHub apps."),(0,i.kt)("h2",{id:"motivation"},"Motivation"),(0,i.kt)("p",null,"NestJS and Probot are great frameworks that helps bootstrap projects for creating complex applications.\nThat being said both have different configuration patterns and overall execution style. So to simplify Probot\nconfiguration and leverage the full extent of NestJS capabilities in such a way the building probot based\ngithub applications becomes declarative using decorators and event-handlers, we created this module."),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Before you can start testing probot with nestjs you will need to create a github app"),(0,i.kt)("p",{parentName:"div"},"Please follow the instructions: ",(0,i.kt)("a",{parentName:"p",href:"https://docs.github.com/en/developers/apps/building-github-apps/creating-a-github-app"},(0,i.kt)("strong",{parentName:"a"},"how to create a github app?"))))),(0,i.kt)("h3",{id:"install"},"Install"),(0,i.kt)(d,{mdxType:"Tabs"},(0,i.kt)(m,{value:"npm",label:"NPM",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"npm i --save @yieldbits/probot\n"))),(0,i.kt)(m,{value:"yarn",label:"YARN",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"yarn add @yieldbits/probot\n")))),(0,i.kt)("h3",{id:"import"},"Import"),(0,i.kt)("p",null,"Import and add ",(0,i.kt)("inlineCode",{parentName:"p"},"ProbotModule")," to the ",(0,i.kt)("inlineCode",{parentName:"p"},"imports")," section of your nestjs ",(0,i.kt)("inlineCode",{parentName:"p"},"app module"),".\nIt's common to inject it directly into app Module's constructor so that it can be used during the ",(0,i.kt)("inlineCode",{parentName:"p"},"onModuleInit"),"\nlifecycle hook at application startup."),(0,i.kt)("h4",{id:"using-synchronous-configuration"},"Using synchronous configuration"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"app.module.ts")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import { ProbotModule } from '@yieldbits/probot';\nimport { Module } from '@nestjs/common';\n\n@Module({\n  imports: [\n    ProbotModule.forRoot({\n      path: 'hook', # application path to with github will send events\n      config: {\n        appId: envConfig.GH_APP_ID,\n        clientId: envConfig.GH_CLIENT_ID,\n        clientSecret: envConfig.GH_CLIENT_SECRET,\n        privateKey: envConfig.GH_PRIVATE_KEY, # base64 converted value of your github private key\n        webhookSecret: envConfig.GH_WEBHOOK_SECRET, # optional\n        webhookProxy: envConfig.GH_WEBHOOK_PROXY, # optional\n        webhookPath: envConfig.GH_WEBHOOK_PATH, # optional\n      },\n    })\n  ]\n})\nexport class ExampleModule {}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"app.controller.ts")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Controller, Get } from '@nestjs/common';\nimport { Hook } from '@yieldbits/probot';\n\n@Controller()\nexport class AppController {\n  @Get()\n  getHello(): string {\n    return 'Hello World!';\n  }\n\n  @Hook(['issue_comment.created'])\n  async hook(context) {\n    console.log(context);\n  }\n}\n\n```#### Using asynchronous configuration\n\n> app.module.ts\n\n```typescript\nimport { ProbotModule } from '@yieldbits/probot';\nimport { Module } from '@nestjs/common';\n\n@Module({\n  imports: [\n    ProbotModule.forRootAsync({\n      isGlobal: true, # (optional), defaults to true\n      path: 'hook', # application path to with github will send events\n      useFactory: (envConfig: ConfigService) => ({\n        appId: envConfig.GH_APP_ID,\n        clientId: envConfig.GH_CLIENT_ID,\n        clientSecret: envConfig.GH_CLIENT_SECRET,\n        privateKey: envConfig.GH_PRIVATE_KEY, # base64 converted value of your github private key\n        webhookSecret: envConfig.GH_WEBHOOK_SECRET, # optional\n        webhookProxy: envConfig.GH_WEBHOOK_PROXY, # optional\n        webhookPath: envConfig.GH_WEBHOOK_PATH, # optional\n      }),\n      inject: [ConfigService],\n    })\n  ]\n})\nexport class ExampleModule {}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"app.controller.ts")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"import { Controller, Get } from '@nestjs/common';\nimport { Hook } from '@yieldbits/probot';\n\n@Controller()\nexport class AppController {\n  @Get()\n  getHello(): string {\n    return 'Hello World!';\n  }\n\n  @Hook(['issue_comment.created'])\n  async hook(context) {\n    console.log(context);\n  }\n}\n")),(0,i.kt)("h3",{id:"example"},"Example"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"A full example of a nestjs application configured with probot module is available\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/yieldbits/nestjs/tree/main/integration/example"},(0,i.kt)("strong",{parentName:"a"},"here"))))),(0,i.kt)("h2",{id:"contribute"},"Contribute"),(0,i.kt)("p",null,"Contributions welcome! Read the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/yieldbits/nestjs/blob/main/contributing.md"},"contribution guidelines")," first."))}w.isMDXComponent=!0}}]);